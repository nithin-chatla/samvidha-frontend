<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Samvidha Dashboard</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>

<!-- Tailwind for utilities -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- ChartJS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

/* Sidebar */
.sidebar {
  width: 260px;
  background: #fff;
  height: 100vh;
  position: fixed;
  left: 0;
  top: 0;
  border-right: 1px solid #e5e7eb;
  transition: all 0.3s ease;
  padding: 20px;
}

body {
  background:#f2f4f8;
  font-family: 'Inter', sans-serif;
}

/* Page content */
.page {
  margin-left: 260px;
  padding: 20px;
  transition: all 0.3s ease;
}

/* Active link */
.nav-link.active {
  background:#0d6efd !important;
  color:white !important;
  border-radius:8px;
}

/* Card glass effect */
.glass-card {
  background: rgba(255,255,255,0.55);
  backdrop-filter: blur(14px);
  box-shadow: 0 4px 20px rgba(0,0,0,0.05);
  border-radius: 18px;
  transition: transform .2s ease, box-shadow .2s ease;
}

.glass-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 30px rgba(0,0,0,0.12);
}

/* Fade animation */
.view {
  animation: fadeIn .25s ease;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: none; }
}

/* Loading shimmer */
.shimmer {
  height: 18px;
  width: 100%;
  border-radius: 6px;
  margin-bottom: 8px;
  background: linear-gradient(90deg, #eee 25%, #f7f7f7 50%, #eee 75%);
  background-size: 200% 100%;
  animation: shimmer 1.2s infinite;
}
@keyframes shimmer {
  from { background-position: 200% 0; }
  to { background-position: -200% 0; }
}
.loader-spin {
  width: 40px;
  height: 40px;
  border: 4px solid #ddd;
  border-top-color: #6366f1;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  margin: auto;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

</style>
</head>

<body>

<!-- Sidebar -->
<div class="sidebar shadow-sm">
  <h3 class="fw-bold mb-3">Samvidha</h3>
  <small class="text-muted d-block mb-4">Student Dashboard</small>

  <ul class="nav flex-column gap-1">
    <li><a class="nav-link active" data-view="dashboard" href="#"><i class="fa fa-home me-2"></i>Dashboard</a></li>
    <li><a class="nav-link" data-view="attendance" href="#"><i class="fa fa-calendar-check me-2"></i>Attendance</a></li>
    <li><a class="nav-link" data-view="marks" href="#"><i class="fa fa-list-check me-2"></i>Mid Marks</a></li>
    <li><a class="nav-link" data-view="profile" href="#"><i class="fa fa-user me-2"></i>Profile</a></li>
    <li class="mt-3 text-danger"><a id="btnLogout" class="nav-link" href="#"><i class="fa fa-sign-out-alt me-2"></i>Logout</a></li>
  </ul>
</div>


<!-- Main Page -->
<div class="page">

  <h2 id="pageTitle" class="mb-4">Dashboard</h2>

  <!-- ********************** DASHBOARD VIEW *********************** -->
  <section id="view-dashboard" class="view">

  <!-- Attendance Overview -->
  <div class="row g-4">

    <!-- Animated Attendance Summary Card -->
    <div class="col-md-4">
      <div class="glass-card p-4 text-center" style="border-top: 5px solid #4ADE80;">
        <h5 class="fw-bold mb-3">Overall Attendance</h5>

        <div style="position: relative; width:150px; margin:auto;">
          <canvas id="overallAttendanceGauge" width="150" height="150"></canvas>
          <div id="overallAttendanceText"
               style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
               font-size:28px; font-weight:700;">
            0%
          </div>
        </div>

        <p class="text-muted mt-2">Based on your total attendance</p>
      </div>
    </div>

    <!-- GREEN SAFE -->
    <div class="col-md-4">
      <div class="glass-card p-4 shadow-sm">
        <h6 class="fw-bold text-green-600 mb-2">
          <i class="fa-solid fa-circle-check me-2"></i>Safe Subjects (≥ 85%)
        </h6>
        <h2 id="safeCount" class="fw-bold text-green-500">0</h2>
      </div>
    </div>

    <!-- YELLOW WARNING -->
    <div class="col-md-4">
      <div class="glass-card p-4 shadow-sm">
        <h6 class="fw-bold text-yellow-600 mb-2">
          <i class="fa-solid fa-triangle-exclamation me-2"></i>Warning (75% - 84%)
        </h6>
        <h2 id="warnCount" class="fw-bold text-yellow-500">0</h2>
      </div>
    </div>

    <!-- RED CRITICAL -->
    <div class="col-md-4">
      <div class="glass-card p-4 shadow-sm">
        <h6 class="fw-bold text-red-600 mb-2">
          <i class="fa-solid fa-circle-xmark me-2"></i>Critical (≤ 74%)
        </h6>
        <h2 id="criticalCount" class="fw-bold text-red-500">0</h2>
      </div>
    </div>

    <!-- Existing Attendance Chart -->
    <div class="col-md-8">
      <div class="glass-card p-4">
        <h6 class="fw-bold mb-2">Attendance % by Subject</h6>
        <canvas id="attendanceChart" height="160"></canvas>
      </div>
    </div>

  </div>

</section>



  <!-- ********************** ATTENDANCE *********************** -->
  <section id="view-attendance" class="view d-none">
    <div class="glass-card p-4">
      <h4>Attendance</h4>
      <div id="attendanceTableWrap" class="table-responsive mt-3">
  
  <!-- Skeleton Loader -->
  <div id="attendanceLoader">
      <div class="shimmer" style="height: 20px; width: 80%;"></div>
      <div class="shimmer" style="height: 20px; width: 95%;"></div>
      <div class="shimmer" style="height: 20px; width: 90%;"></div>
      <div class="shimmer" style="height: 20px; width: 85%;"></div>
      <div class="shimmer" style="height: 20px; width: 80%;"></div>
  </div>

</div>

    </div>
  </section>


  <!-- ********************** MID MARKS *********************** -->
  <section id="view-marks" class="view d-none">
    <div class="glass-card p-4">
      <h4>Mid Marks</h4>
      <div id="marksLoading" class="text-muted">Loading marks...</div>
      <div id="marksTablesWrap" class="table-responsive mt-3"></div>
    </div>
  </section>


  <!-- ********************** PROFILE *********************** -->
  <section id="view-profile" class="view d-none">
    <div class="glass-card p-4">
      <h4>Profile</h4>
      <div id="profileLoading" class="text-muted mb-2">Loading profile...</div>
      <div id="profileWrap"></div>
    </div>
  </section>

</div>

<script src="app.js"></script>

</body>
</html>

